<!DOCTYPE html>




<html>
<head>
    <title>Financial Data Chart - All Regions</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.7/dist/html2canvas.min.js"></script>
    <style>
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            padding: 20px;
        }
        canvas {
            background: #ffffff;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        .watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 42px;
            font-weight: bold;
            color: rgba(0, 0, 0, 0.1);
            pointer-events: none;
            user-select: none;
            z-index: 1000;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="chart-grid"><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-AFRICA-9" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (9th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-AFRICA-9").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":[50800,"28300","37200",50800,50800,50800,"63500","57000"],"backgroundColor":["rgba(0, 255, 0, 0.8)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(0, 255, 0, 0.8)","rgba(0, 255, 0, 0.8)","rgba(0, 255, 0, 0.8)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 63500,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: AFRICA - Fiscal Month: 9th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["ALL","28,300","37,200","ALL","ALL","ALL","63,500","57,000"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-ASIA-9" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (9th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-ASIA-9").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":[15000,"7800","10000",15000,15000,15000,"18750","9000"],"backgroundColor":["rgba(0, 255, 0, 0.8)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(0, 255, 0, 0.8)","rgba(0, 255, 0, 0.8)","rgba(0, 255, 0, 0.8)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 18750,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: ASIA - Fiscal Month: 9th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["ALL","7,800","10,000","ALL","ALL","ALL","18,750","9,000"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-EUROPE-9" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (9th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-EUROPE-9").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":[24000,"20300","26800",24000,24000,24000,"30000","21000"],"backgroundColor":["rgba(0, 255, 0, 0.8)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(0, 255, 0, 0.8)","rgba(0, 255, 0, 0.8)","rgba(0, 255, 0, 0.8)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 30000,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: EUROPE - Fiscal Month: 9th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["ALL","20,300","26,800","ALL","ALL","ALL","30,000","21,000"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-NORTH AMERICA (BAHAMAS)-9" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (9th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-NORTH AMERICA (BAHAMAS)-9").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":[12.800000000000000710542735760100185871124267578125,"16","14",12.800000000000000710542735760100185871124267578125,12.800000000000000710542735760100185871124267578125,"10","15","15"],"backgroundColor":["rgba(0, 255, 0, 0.8)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(0, 255, 0, 0.8)","rgba(0, 255, 0, 0.8)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 16,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: NORTH AMERICA (BAHAMAS) - Fiscal Month: 9th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["ALL","16","14","ALL","ALL","10","15","15"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-OCEANIA-9" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (9th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-OCEANIA-9").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":[1480,"1100","1025",1480,1480,1480,"1550","1850"],"backgroundColor":["rgba(0, 255, 0, 0.8)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(0, 255, 0, 0.8)","rgba(0, 255, 0, 0.8)","rgba(0, 255, 0, 0.8)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 1850,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: OCEANIA - Fiscal Month: 9th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["ALL","1,100","1,025","ALL","ALL","ALL","1,550","1,850"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-SOUTH AMERICA, and the CARIBBEAN-9" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (9th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-SOUTH AMERICA, and the CARIBBEAN-9").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":[2200,"1275","1150",2200,2200,2200,"2740","2750"],"backgroundColor":["rgba(0, 255, 0, 0.8)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(0, 255, 0, 0.8)","rgba(0, 255, 0, 0.8)","rgba(0, 255, 0, 0.8)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 2750,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: SOUTH AMERICA, and the CARIBBEAN - Fiscal Month: 9th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["ALL","1,275","1,150","ALL","ALL","ALL","2,740","2,750"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div></div>
    <script>
    setTimeout(() => {
    html2canvas(document.querySelector(".chart-grid"), {
        scale: 2,
        logging: true,
        useCORS: true
    }).then(canvas => {
        var ctx = canvas.getContext("2d");

        // اضافه کردن واترمارک "DVBULLETIN" در وسط کل عکس با استفاده از روش دقیق‌تر
        var text = "@visa_bulletin";
        var fontSize = 72;
        ctx.font = `bold ${fontSize}px Arial`;
        ctx.fillStyle = "rgba(0, 0, 0, 0.2)";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";

        // محاسبه مختصات صحیح برای مرکز تصویر
        var x = canvas.width / 4;
        var y = canvas.height / 4;
        
        ctx.fillText(text, x, y);

        var imgData = canvas.toDataURL("image/png", 1.0);

        var xhr = new XMLHttpRequest();
        xhr.open("POST", "send_to_telegram.php", true);
        xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        xhr.send("imgBase64=" + encodeURIComponent(imgData) + "&fileName=" + encodeURIComponent("chart_all_regions"));
    });
}, 20000);
</script>
</body>
</html>