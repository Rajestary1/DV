<!DOCTYPE html>




<html>
<head>
    <title>Financial Data Chart - All Regions</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.7/dist/html2canvas.min.js"></script>
    <style>
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            padding: 20px;
        }
        canvas {
            background: #ffffff;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        .watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 42px;
            font-weight: bold;
            color: rgba(0, 0, 0, 0.1);
            pointer-events: none;
            user-select: none;
            z-index: 1000;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="chart-grid"><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-AFRICA-8" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (8th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-AFRICA-8").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":[51040,"24800","24500","45175","34000","63800","60000","52000"],"backgroundColor":["rgba(0, 255, 0, 0.8)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 63800,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: AFRICA - Fiscal Month: 8th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["ALL","24,800","24,500","45,175","34,000","63,800","60,000","52,000"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-ASIA-8" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (8th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-ASIA-8").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":[24000,"6425","7800","18450","13000","30000","18750","8000"],"backgroundColor":["rgba(0, 255, 0, 0.8)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 30000,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: ASIA - Fiscal Month: 8th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["ALL","6,425","7,800","18,450","13,000","30,000","18,750","8,000"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-EUROPE-8" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (8th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-EUROPE-8").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":[24000,"18050","21900","30000","18000","27000","30000","18000"],"backgroundColor":["rgba(0, 255, 0, 0.8)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 30000,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: EUROPE - Fiscal Month: 8th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["ALL","18,050","21,900","30,000","18,000","27,000","30,000","18,000"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-NORTH AMERICA (BAHAMAS)-8" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (8th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-NORTH AMERICA (BAHAMAS)-8").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":[13.60000000000000142108547152020037174224853515625,"14","13","17","8","10","15","15"],"backgroundColor":["rgba(0, 255, 0, 0.8)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 17,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: NORTH AMERICA (BAHAMAS) - Fiscal Month: 8th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["ALL","14","13","17","8","10","15","15"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-OCEANIA-8" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (8th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-OCEANIA-8").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":[1720,"1025","900","2150","1400","1200","1450","1650"],"backgroundColor":["rgba(0, 255, 0, 0.8)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 2150,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: OCEANIA - Fiscal Month: 8th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["ALL","1,025","900","2,150","1,400","1,200","1,450","1,650"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-SOUTH AMERICA, and the CARIBBEAN-8" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (8th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-SOUTH AMERICA, and the CARIBBEAN-8").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":[2080,"1100","900","1875","1650","1300","2400","2600"],"backgroundColor":["rgba(0, 255, 0, 0.8)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 2600,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: SOUTH AMERICA, and the CARIBBEAN - Fiscal Month: 8th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["ALL","1,100","900","1,875","1,650","1,300","2,400","2,600"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div></div>
    <script>
    setTimeout(() => {
    html2canvas(document.querySelector(".chart-grid"), {
        scale: 2,
        logging: true,
        useCORS: true
    }).then(canvas => {
        var ctx = canvas.getContext("2d");

        // اضافه کردن واترمارک "DVBULLETIN" در وسط کل عکس با استفاده از روش دقیق‌تر
        var text = "@visa_bulletin";
        var fontSize = 72;
        ctx.font = `bold ${fontSize}px Arial`;
        ctx.fillStyle = "rgba(0, 0, 0, 0.2)";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";

        // محاسبه مختصات صحیح برای مرکز تصویر
        var x = canvas.width / 4;
        var y = canvas.height / 4;
        
        ctx.fillText(text, x, y);

        var imgData = canvas.toDataURL("image/png", 1.0);

        var xhr = new XMLHttpRequest();
        xhr.open("POST", "send_to_telegram.php", true);
        xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        xhr.send("imgBase64=" + encodeURIComponent(imgData) + "&fileName=" + encodeURIComponent("chart_all_regions"));
    });
}, 20000);
</script>
</body>
</html>