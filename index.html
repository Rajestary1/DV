<!DOCTYPE html>




<html>
<head>
    <title>Financial Data Chart - All Regions</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.7/dist/html2canvas.min.js"></script>
    <style>
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            padding: 20px;
        }
        canvas {
            background: #ffffff;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        .watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 42px;
            font-weight: bold;
            color: rgba(0, 0, 0, 0.1);
            pointer-events: none;
            user-select: none;
            z-index: 1000;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="chart-grid"><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-AFRICA-6" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (6th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-AFRICA-6").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024","2025"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":["28700","17700","15300","31500","14000","21000","45000","40000","25000"],"backgroundColor":["rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 45000,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: AFRICA - Fiscal Month: 6th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["28,700","17,700","15,300","31,500","14,000","21,000","45,000","40,000","25,000"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-ASIA-6" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (6th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-ASIA-6").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024","2025"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":["4700","4400","5000","12500","6200","8300","18750","7000","6000"],"backgroundColor":["rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 18750,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: ASIA - Fiscal Month: 6th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["4,700","4,400","5,000","12,500","6,200","8,300","18,750","7,000","6,000"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-EUROPE-6" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (6th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-EUROPE-6").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024","2025"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":["19300","13800","13500","21000","9400","13500","26000","16000","13000"],"backgroundColor":["rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 26000,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: EUROPE - Fiscal Month: 6th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["19,300","13,800","13,500","21,000","9,400","13,500","26,000","16,000","13,000"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-NORTH AMERICA (BAHAMAS)-6" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (6th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-NORTH AMERICA (BAHAMAS)-6").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024","2025"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":["7","8","12","9","6","8","13","13","20"],"backgroundColor":["rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 20,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: NORTH AMERICA (BAHAMAS) - Fiscal Month: 6th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["7","8","12","9","6","8","13","13","20"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-OCEANIA-6" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (6th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-OCEANIA-6").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024","2025"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":["800","800","550","1625","900","850","1100","1200","1125"],"backgroundColor":["rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 1625,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: OCEANIA - Fiscal Month: 6th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["800","800","550","1,625","900","850","1,100","1,200","1,125"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-SOUTH AMERICA, and the CARIBBEAN-6" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (6th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-SOUTH AMERICA, and the CARIBBEAN-6").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024","2025"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":["875","800","750","1300","1175","1200","2100","2200","1800"],"backgroundColor":["rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 2200,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: SOUTH AMERICA, and the CARIBBEAN - Fiscal Month: 6th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["875","800","750","1,300","1,175","1,200","2,100","2,200","1,800"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div></div>
    <script>
    setTimeout(() => {
    html2canvas(document.querySelector(".chart-grid"), {
        scale: 2,
        logging: true,
        useCORS: true
    }).then(canvas => {
        var ctx = canvas.getContext("2d");

        // اضافه کردن واترمارک "DVBULLETIN" در وسط کل عکس با استفاده از روش دقیق‌تر
        var text = "@visa_bulletin";
        var fontSize = 72;
        ctx.font = `bold ${fontSize}px Arial`;
        ctx.fillStyle = "rgba(0, 0, 0, 0.2)";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";

        // محاسبه مختصات صحیح برای مرکز تصویر
        var x = canvas.width / 4;
        var y = canvas.height / 4;
        
        ctx.fillText(text, x, y);

        var imgData = canvas.toDataURL("image/png", 1.0);

        var xhr = new XMLHttpRequest();
        xhr.open("POST", "send_to_telegram.php", true);
        xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        xhr.send("imgBase64=" + encodeURIComponent(imgData) + "&fileName=" + encodeURIComponent("chart_all_regions"));
    });
}, 20000);
</script>
</body>
</html>