<!DOCTYPE html>




<html>
<head>
    <title>Financial Data Chart - All Regions</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.7/dist/html2canvas.min.js"></script>
    <style>
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            padding: 20px;
        }
        canvas {
            background: #ffffff;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        .watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 42px;
            font-weight: bold;
            color: rgba(0, 0, 0, 0.1);
            pointer-events: none;
            user-select: none;
            z-index: 1000;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="chart-grid"><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-AFRICA-7" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (7th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-AFRICA-7").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":["34900","21100","18900","41000","22000","50000","50000","45000"],"backgroundColor":["rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 50000,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: AFRICA - Fiscal Month: 7th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["34,900","21,100","18,900","41,000","22,000","50,000","50,000","45,000"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-ASIA-7" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (7th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-ASIA-7").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":["5500","5300","6400","15800","9000","17000","18750","7200"],"backgroundColor":["rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 18750,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: ASIA - Fiscal Month: 7th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["5,500","5,300","6,400","15,800","9,000","17,000","18,750","7,200"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-EUROPE-7" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (7th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-EUROPE-7").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":["22100","15950","18500","21200","12000","27000","30000","17500"],"backgroundColor":["rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 30000,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: EUROPE - Fiscal Month: 7th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["22,100","15,950","18,500","21,200","12,000","27,000","30,000","17,500"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-NORTH AMERICA (BAHAMAS)-7" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (7th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-NORTH AMERICA (BAHAMAS)-7").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":["10","10","12","16","7","10","13","13"],"backgroundColor":["rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 16,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: NORTH AMERICA (BAHAMAS) - Fiscal Month: 7th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["10","10","12","16","7","10","13","13"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-OCEANIA-7" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (7th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-OCEANIA-7").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":["850","875","725","1975","1100","1200","1150","1250"],"backgroundColor":["rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 1975,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: OCEANIA - Fiscal Month: 7th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["850","875","725","1,975","1,100","1,200","1,150","1,250"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div><div style="position: relative;">
                    <div class="watermark">Yousof<p>@visa_bulletin</div>
                    <canvas id="chart-SOUTH AMERICA, and the CARIBBEAN-7" width="300" height="200"></canvas>
                    <div style="text-align: center; margin-top: 10px; font-size: 23px; color: #555;">
                        This chart compares visa bulletin statistics (7th) for different fiscal years.
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var ctx = document.getElementById("chart-SOUTH AMERICA, and the CARIBBEAN-7").getContext("2d");
                            Chart.register(ChartDataLabels);

                            var myChart = new Chart(ctx, {
                                type: "bar",
                                data: {"labels":["2017","2018","2019","2020","2021","2022","2023","2024"],"datasets":[{"label":"Year-over-Year DV Visa Bulletin Cut-off Analysis","data":["900","925","875","1560","1400","1300","2250","2400"],"backgroundColor":["rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)","rgba(75, 192, 192, 0.2)"],"borderColor":"rgba(75, 192, 192, 1)","borderWidth":1}]},
                                options: {
                                    layout: {
                                        padding: {
                                            top: 10,
                                            bottom: 20
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            max: 2400,
                                            ticks: {
                                                padding: 10,
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: {
                                                font: {
                                                    size: 21
                                                }
                                            }
                                        }
                                    },
                                    plugins: {
                                        title: {
                                            display: true,
                                            text: "Region: SOUTH AMERICA, and the CARIBBEAN - Fiscal Month: 7th",
                                            font: {
                                                size: 25
                                            },
                                            padding: {
                                                top: 10
                                            }
                                        },
                                        datalabels: {
                                            anchor: "end",
                                            align: "top",
                                            formatter: function(value, context) {
                                                return ["900","925","875","1,560","1,400","1,300","2,250","2,400"][context.dataIndex];
                                            },
                                            font: {
                                                weight: "bold",
                                                size: 21
                                            }
                                        }
                                    },
                                    barThickness: 40
                                }
                            });
                        });
                    </script>
                </div></div>
    <script>
    setTimeout(() => {
    html2canvas(document.querySelector(".chart-grid"), {
        scale: 2,
        logging: true,
        useCORS: true
    }).then(canvas => {
        var ctx = canvas.getContext("2d");

        // اضافه کردن واترمارک "DVBULLETIN" در وسط کل عکس با استفاده از روش دقیق‌تر
        var text = "@visa_bulletin";
        var fontSize = 72;
        ctx.font = `bold ${fontSize}px Arial`;
        ctx.fillStyle = "rgba(0, 0, 0, 0.2)";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";

        // محاسبه مختصات صحیح برای مرکز تصویر
        var x = canvas.width / 4;
        var y = canvas.height / 4;
        
        ctx.fillText(text, x, y);

        var imgData = canvas.toDataURL("image/png", 1.0);

        var xhr = new XMLHttpRequest();
        xhr.open("POST", "send_to_telegram.php", true);
        xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        xhr.send("imgBase64=" + encodeURIComponent(imgData) + "&fileName=" + encodeURIComponent("chart_all_regions"));
    });
}, 20000);
</script>
</body>
</html>